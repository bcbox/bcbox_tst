function showLoader(){document.getElementById("loader").style.display="unset"}function hideLoader(){document.getElementById("loader").style.display="none"}function resetClick(){updateSetting("bt,RESET BCBOX",1),setTimeout(function(){hideLoader()},60)}function mqttClientIdSaveClick(){updateSetting("txt,MQTT CLIENT ID",document.getElementById("MQTT_CLIENT_ID").value)}function relaysSaveClick(){updateSetting("txt,RELAYS",document.getElementById("RELAYS").value)}function mqttTopicClick(){updateSetting("txt,MQTT TOPIC",document.getElementById("MQTT_TOPIC").value)}function timeZoneClick(){updateSetting("TIME-ZONE",document.getElementById("TIME_ZONE").value)}function saveWifiClick(){updateWifi(document.getElementById("wifiSELECT").value,document.getElementById("wifiPWD").value)}function automaticUpdateChanged(e){let t=1;!1===e.checked&&(t=0),updateSetting("sw,AUTOMATIC UPDATE",t)}function testingSoftwareChanged(e){let t=1;!1===e.checked&&(t=0),updateSetting("sw,TESTING SOFTWARE",t)}function updateWifi(e,t){showLoader(),fetch("/updateWifi",{method:"POST",body:JSON.stringify({ssid:e,password:t})}).then(()=>{hideLoader(),loadWifi(),document.getElementById("wifiPWD").value=""}).catch(e=>{console.error(e),alert(e),hideLoader()})}function updateSetting(e,t){showLoader(),fetch("/updateSetting",{method:"POST",body:JSON.stringify({variable:e,value:t})}).then(()=>{hideLoader()}).catch(e=>{console.error(e),alert(e),hideLoader()})}function loadWifi(){showLoader(),fetch("/loadWifiSSID").then(e=>e.json()).then(e=>{console.log("wifi: "+JSON.stringify(e)),document.getElementById("SSID").innerHTML=e.connectSSID;let t=document.getElementById("wifiSELECT");for(let n in t.innerHTML="",e){var i=document.createElement("option");i.value=n,i.innerHTML=n,t.appendChild(i)}hideLoader()}).catch(e=>{console.error(e),alert(e),hideLoader()})}function loadSettings(){showLoader(),fetch("/loadSettings").then(e=>e.json()).then(e=>{console.log("settings: "+JSON.stringify(e)),document.getElementById("ACTUAL_SW_VERSION").innerHTML=e["txt,ACTUAL SW VERSION"],document.getElementById("ERRORS").innerHTML=e.ERRORS,document.getElementById("ID").innerHTML=e.ID,document.getElementById("AUTOMATIC_UPDATE").checked="1"===e["sw,AUTOMATIC UPDATE"],document.getElementById("TESTING_SOFTWARE").checked="1"===e["sw,TESTING SOFTWARE"],document.getElementById("MQTT_CLIENT_ID").value=e["txt,MQTT CLIENT ID"],document.getElementById("RELAYS").value=e["txt,RELAYS"],document.getElementById("MQTT_TOPIC").value=e["txt,MQTT TOPIC"],document.getElementById("TIME_ZONE").value=e["TIME-ZONE"],hideLoader(),loadWifi()}).catch(e=>{console.error(e),alert(e),hideLoader()})}